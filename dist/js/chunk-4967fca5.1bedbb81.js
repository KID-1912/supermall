(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4967fca5"],{"0023":function(t,e,s){},"0748":function(t,e,s){"use strict";var o=s("9a1d"),n=s.n(o);n.a},"159b":function(t,e,s){var o=s("da84"),n=s("fdbc"),a=s("17c2"),i=s("9112");for(var r in n){var c=o[r],l=c&&c.prototype;if(l&&l.forEach!==a)try{i(l,"forEach",a)}catch(f){l.forEach=a}}},"17c2":function(t,e,s){"use strict";var o=s("b727").forEach,n=s("a640"),a=s("ae40"),i=n("forEach"),r=a("forEach");t.exports=i&&r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1f48":function(t,e,s){},"200f":function(t,e,s){},2635:function(t,e,s){},3464:function(t,e,s){},"34a2":function(t,e,s){"use strict";var o=s("2635"),n=s.n(o);n.a},4160:function(t,e,s){"use strict";var o=s("23e7"),n=s("17c2");o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"47cf":function(t,e,s){"use strict";var o=s("3464"),n=s.n(o);n.a},5530:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b");function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}},"69e4":function(t,e,s){"use strict";var o=s("f36b"),n=s.n(o);n.a},"7a1a":function(t,e,s){"use strict";var o=s("0023"),n=s.n(o);n.a},8661:function(t,e,s){},"957e":function(t,e,s){"use strict";var o=s("8661"),n=s.n(o);n.a},"9a1d":function(t,e,s){},b2a2:function(t,e,s){},b64b:function(t,e,s){var o=s("23e7"),n=s("7b0b"),a=s("df75"),i=s("d039"),r=i((function(){a(1)}));o({target:"Object",stat:!0,forced:r},{keys:function(t){return a(n(t))}})},bca3:function(t,e,s){"use strict";var o=s("200f"),n=s.n(o);n.a},cf6c:function(t,e,s){"use strict";var o=s("b2a2"),n=s.n(o);n.a},dbb4:function(t,e,s){var o=s("23e7"),n=s("83ab"),a=s("56ef"),i=s("fc6a"),r=s("06cf"),c=s("8418");o({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,s,o=i(t),n=r.f,l=a(o),f={},d=0;while(l.length>d)s=n(o,e=l[d++]),void 0!==s&&c(f,e,s);return f}})},e439:function(t,e,s){var o=s("23e7"),n=s("d039"),a=s("fc6a"),i=s("06cf").f,r=s("83ab"),c=n((function(){i(1)})),l=!r||c;o({target:"Object",stat:!0,forced:l,sham:!r},{getOwnPropertyDescriptor:function(t,e){return i(a(t),e)}})},f36b:function(t,e,s){},f574:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail"},[s("navBar",{ref:"navbar",on:{tabClick:t.tabClick}}),s("scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{probeType:3},on:{scroll:t.scroll}},[s("detail-swipper",{attrs:{topImages:t.topImages}}),s("detail-baseinfo",{attrs:{good:t.good}}),s("detail-commentinfo",{ref:"comment",attrs:{comment:t.comment}}),s("detail-shopinfo",{attrs:{shop:t.shop}}),s("detail-goodinfo",{attrs:{goodInfo:t.detailInfo},on:{imgLoaded:this.goodsItemListener}}),s("detail-paramsinfo",{ref:"params",attrs:{params:t.params}}),s("goods-list",{ref:"recommend",attrs:{goods:t.recommendGoods,isShowBtn:!1},nativeOn:{click:function(e){return t.reload(e)}}})],1),s("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],ref:"backtop",nativeOn:{click:function(e){return t.backTop(e)}}}),s("detail-bottombar",{on:{addCart:t.addCart}})],1)},n=[],a=(s("b0c0"),s("5530")),i=s("2f62"),r=s("5d17"),c=s("b33d"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav-bar",[s("div",{staticClass:"navbar-left",attrs:{slot:"left"},on:{click:t.backTo},slot:"left"},[s("i",{staticClass:"icon iconleft"})]),s("div",{staticClass:"navbar-center",attrs:{slot:"center"},slot:"center"},t._l(t.titles,(function(e,o){return s("a",{staticClass:"navbar-item",class:{active:o===t.currentIndex},on:{click:function(e){return t.itemClick(o)}}},[t._v(t._s(e))])})),0)])},f=[],d=s("a7ac"),u={data:function(){return{titles:["商品","评论","参数","推荐"],currentIndex:0}},computed:{},methods:{backTo:function(){this.$router.back()},itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}},components:{navBar:d["a"]}},p=u,m=(s("f5b8"),s("2877")),h=Object(m["a"])(p,l,f,!1,null,"b99e4c36",null),v=h.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("swipper",{staticClass:"swipper"},t._l(t.topImages,(function(t){return s("swipper-item",[s("img",{attrs:{src:t}})])})),1)},g=[],_=s("e1e0"),C={props:{topImages:{type:Array,default:function(){return[]}}},methods:{},components:{swipper:_["a"],swipperItem:_["b"]}},w=C,O=(s("cf6c"),Object(m["a"])(w,b,g,!1,null,"5fb905b0",null)),y=O.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.good).length?s("div",{staticClass:"base-info"},[s("div",{staticClass:"info-price"},[s("div",{staticClass:"info-price-top"},[s("span",{staticClass:"n-price"},[t._v(t._s(t.good.newPrice))]),t.good.discount?s("span",{staticClass:"discount"},[t._v(t._s(t.good.discount))]):t._e()]),t._v(" 价格:"),s("span",{staticClass:"o-price"},[t._v(t._s(t.good.oldPrice))])]),s("div",{staticClass:"info-title microBorder"},[t._v(t._s(t.good.title))]),s("div",{staticClass:"info-other"},[s("span",{staticClass:"tl"},[t._v(t._s(t.good.columns[0]))]),s("span",{staticClass:"tc"},[t._v(t._s(t.good.columns[1]))]),s("span",{staticClass:"tr"},[t._v(t._s(t.good.services[0].name))])]),s("div",{staticClass:"info-services tc"},t._l(t.good.services.length-1,(function(e){return s("span",{staticClass:"text-ellipsis"},[s("img",{attrs:{src:t.good.services[e].icon}}),t._v(" "+t._s(t.good.services[e].name)+" ")])})),0)]):t._e()},P=[],I={props:{good:{type:Object,default:function(){return{}}}}},$=I,k=(s("34a2"),Object(m["a"])($,j,P,!1,null,"2523b6b4",null)),E=k.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"shopInfo"},[o("div",{staticClass:"info-top"},[o("div",{staticClass:"info-left"},[o("img",{attrs:{src:t.shop.logo}})]),o("div",{staticClass:"info-right"},[o("div",{staticClass:"info-name"},[t._v(t._s(t.shop.name))]),o("div",{staticClass:"info-detail"},[t._l(t.shop.level,(function(t){return o("img",{attrs:{src:s("59fb")}})})),o("span",{staticClass:"info-divider mgl10"},[t._v("|")]),o("span",{staticClass:"info-goods mgl10"},[t._v("在架商品 "+t._s(t.shop.goods))]),o("span",{staticClass:"info-divider mgl10"},[t._v("|")]),o("span",{staticClass:"mgl10"},[t._v(t._s(t.shop.sells)+"人关注")])],2)])]),o("ul",{staticClass:"info-score tc"},t._l(t.shop.score,(function(e){return o("li",[o("span",[t._v(t._s(e.name))]),o("span",{staticClass:"score",class:{"better-score":e.isBetter}},[t._v(t._s(e.score))]),o("i",{staticClass:"better icon",class:[e.isBetter?"icontop more-better":"iconbottom"]})])})),0),o("div",{staticClass:"shop-label"},[o("a",{staticClass:"allGoods",attrs:{href:t.shop.goodsUrl}},[t._v("全部商品")]),o("a",{staticClass:"shopEnter",attrs:{href:t.shop.url}},[t._v("进入店铺")])])])},T=[],Y={props:{shop:{type:Object,default:function(){return{}}}},data:function(){return{}}},B=Y,L=(s("69e4"),Object(m["a"])(B,x,T,!1,null,"2ff81d43",null)),D=L.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.comment).length?s("div",{staticClass:"info-comment"},[s("div",{staticClass:"info-title clear-fix"},[s("div",{staticClass:"info-comment-total left"},[t._v(" 商品评价 ("+t._s(t.comment.cRate)+") ")]),t._m(0)]),s("div",{staticClass:"info-user"},[s("img",{attrs:{src:t.comment.list[0].user.avatar}}),s("span",{staticClass:"info-name"},[t._v(t._s(t.comment.list[0].user.uname))])]),s("p",{staticClass:"info-content"},[t._v(t._s(t.comment.list[0].content))]),s("div",{staticClass:"info-date"},[s("span",{staticClass:"info-date-d"},[t._v(t._s(t._f("formtDate")(t.comment.list[0].created)))]),s("span",[t._v(t._s(t.comment.list[0].style))])])]):t._e()},G=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info-comment-more right"},[s("a",{attrs:{href:""}},[t._v("＞")])])}],N=s("90b9"),U={props:{comment:{value:Object}},filters:{formtDate:function(t){return Object(N["b"])(t,"yyyy-MM-dd")}}},A=U,M=(s("0748"),Object(m["a"])(A,S,G,!1,null,"3f041477",null)),R=M.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.goodInfo).length?s("div",{staticClass:"good-info"},[s("div",{staticClass:"info-dsc"},[t._v(t._s(t.goodInfo.detailImage[0].key))]),s("div",{staticClass:"info-img"},t._l(t.goodInfo.detailImage[0].list,(function(e){return s("img",{attrs:{src:e},on:{load:t.imgLoaded}})})),0)]):t._e()},J=[],q={props:{goodInfo:{type:Object}},data:function(){return{counter:0}},watch:{},methods:{imgLoaded:function(){this.$emit("imgLoaded")}}},z=q,H=(s("957e"),Object(m["a"])(z,F,J,!1,null,"4edb5919",null)),K=H.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"params-info"},[s("table",{staticClass:"info-tab"},t._l(t.params,(function(e){return s("tr",[s("td",{staticClass:"info-tab-key"},[t._v(t._s(e.key))]),s("td",{staticClass:"info-tab-val"},[t._v(t._s(e.value))])])})),0)])},V=[],W={props:{params:{type:Array}}},X=W,Z=(s("7a1a"),Object(m["a"])(X,Q,V,!1,null,"022112a2",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bar tc"},[t._m(0),t._m(1),t._m(2),s("div",{staticClass:"addCart",on:{click:t.addCart}},[t._v("加入购物车")]),t._m(3)])},st=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop"},[s("i",{staticClass:"icon"}),s("span",[t._v("店铺")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"server"},[s("i",{staticClass:"icon"}),s("span",[t._v("客服")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collect"},[s("i",{staticClass:"icon"}),s("span",[t._v("收藏")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"buyNow"},[s("a",{attrs:{href:""}},[t._v("立即购买")])])}],ot={methods:{addCart:function(){this.$emit("addCart")}}},nt=ot,at=(s("bca3"),Object(m["a"])(nt,et,st,!1,null,"6587609a",null)),it=at.exports;function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ct=s("1bab");function lt(t){return Object(ct["a"])({url:"/detail",params:{iid:t}})}function ft(){return Object(ct["a"])({url:"/recommend"})}var dt=function t(e,s,o){rt(this,t),this.title=e.title,this.desc=e.desc,this.newPrice=e.price,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.columns=s,this.services=o,this.nowPrice=e.highNowPrice,this.lowNowPrice=e.lowNowPrice},ut=function t(e){rt(this,t),this.logo=e.shopLogo,this.name=e.name,this.score=e.score,this.fans=e.cFans,this.goods=e.cGoods,this.sells=e.cSells,this.level=e.level,this.url=e.shopUrl,this.goodsUrl=e.allGoodsUrl},pt=s("eecb"),mt={name:"detail",mixins:[pt["b"],pt["a"]],data:function(){return{id:null,topImages:null,good:{},comment:{},shop:{},detailInfo:{},params:[],recommendGoods:[],contentPositionY:[0,0,0,0],getContentPositionY:null}},created:function(){this.detailCreated()},beforeRouteLeave:function(t,e,s){console.log("destoryed"),this.$bus.$off("imgLoaded",this.goodsItemListener),s()},methods:Object(a["a"])(Object(a["a"])({detailCreated:function(){var t=this;this.id=this.$route.query.id,lt(this.id).then((function(e){var s=e.result;console.log(e),t.topImages=s.itemInfo.topImages,t.good=new dt(s.itemInfo,s.columns,s.shopInfo.services),s.rate.cRate&&(t.comment=s.rate),t.shop=new ut(s.shopInfo),t.detailInfo=s.detailInfo,t.params=s.itemParams.info.set})),ft().then((function(e){var s=e.data;console.log(s),t.recommendGoods=s.list})),this.getContentPositionY=Object(N["a"])((function(){t.contentPositionY=[0],t.contentPositionY[1]=t.$refs.comment.$el.offsetTop||0,t.contentPositionY[2]=t.$refs.params.$el.offsetTop||0,t.contentPositionY[3]=t.$refs.recommend.$el.offsetTop||0,console.log(t.contentPositionY)}),1e3)}},Object(i["b"])({$addCart:"addCart"})),{},{tabClick:function(t){var e=-1*this.contentPositionY[t];this.$refs.scroll.scrollTo(0,e,200)},scroll:function(t){this.isShowBackTop=Math.abs(t.y)>1e3;var e=-1*t.y+100,s=this.$refs.navbar;for(var o in this.contentPositionY)if(o*=1,this.contentPositionY[o]<=e&&this.contentPositionY[o+1]>e)return s.currentIndex=o;s.currentIndex=this.contentPositionY.length-1},addCart:function(){var t=this,e={};e.goodId=this.id,e.shopName=this.shop.name,e.shopLogo=this.shop.logo,e.shopUrl=this.shop.url,e.goodImg=this.topImages[0],e.goodTitle=this.good.title,e.goodLowPrice=parseFloat(this.good.lowNowPrice),e.count=1,this.$addCart(e).then((function(e){return t.$toast.show(e)}))},reload:function(){this.detailCreated()}}),components:{scroll:r["a"],navBar:v,detailSwipper:y,detailBaseinfo:E,detailCommentinfo:R,detailShopinfo:D,detailGoodinfo:K,detailParamsinfo:tt,goodsList:c["a"],detailBottombar:it}},ht=mt,vt=(s("47cf"),Object(m["a"])(ht,o,n,!1,null,"476212b8",null));e["default"]=vt.exports},f5b8:function(t,e,s){"use strict";var o=s("1f48"),n=s.n(o);n.a}}]);
//# sourceMappingURL=chunk-4967fca5.1bedbb81.js.map